kind: Flow
step:
  concurrency: -1
  flows:
    - id: "retrieve_file_objects"
      type: file
      file: "retrieve/retriever/file_object.yaml"
      thread_only_values:
        - key: "RecordCount"
          value: "{{ mul .Values.InitSlaveCount .Values.InitThreadPerSlaveCount .Values.InitRequestPerSlaveCount }}"
    - id: "import_file_objects"
      type: file
      file: "retrieve/importer/file_object.yaml"
      depends_on:
        - flow: "retrieve_file_objects"
          event: sys:terminated